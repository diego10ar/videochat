<div class="oj-hybrid-applayout-page">
	<div class="oj-applayout-fixed-top">
		<header role="banner" class="oj-hybrid-applayout-header">
			<oj-module config="[[headerConfig]]"></oj-module>
		</header>
	</div>
	<div class="oj-applayout-content">
		<div role="main" class="oj-hybrid-applayout-content">
			<div class="oj-hybrid-padding">
				<h1>Zona de conversación</h1>
				<i data-bind="html : estado"></i>
				<strong data-bind="html : error" style="color : red"></strong>
	
				<!-- ko with : user -->
				<div class="oj-flex">
					<div class="oj-sm-4">
						<!-- ko if : picture -->
							<img data-bind="attr : { src : picture }" width="50" height="50">
						<!-- /ko -->
					</div>
					<div class="oj-sm-4">
						Conectado como <span data-bind="html : name"></span>
					</div>
					<div class="oj-sm-4"></div>
				</div>
				<!-- /ko -->
				
				<!-- ko with : chat -->
					<div class="oj-flex">
						<div class="oj-sm-8">
							<div class="oj-flex">
								<div class="oj-sm-6">
									<h2>Usuarios</h2>
									<!-- ko foreach : usuarios -->
									<div>
										<!-- ko if : foto -->
											<img data-bind="attr : { src : foto }" width="30" height="30">
										<!-- /ko -->
										<a data-bind="html : nombre, click : $parent.setRecipient"></a>
									</div>
									<!-- /ko -->						
								</div>
	
								<div class="oj-sm-6">
									<h2>Zona de mensajes</h2>
									<!-- ko foreach : mensajesRecibidos -->
									<div data-bind="html : $data"></div>
									<!-- /ko -->
			
									<input type="text" size="50"
										data-bind="value : mensajeQueVoyAEnviar">
									<button data-bind="click : enviarATodos">Enviar mensaje a todos</button>
									<br>								
								</div>
							</div>
							
							<div class="oj-sm-12">
								<h2>Zona de conversaciones</h2>
								<!-- ko foreach : conversaciones -->
								<div data-bind="visible : visible">
									<!-- ko with : nombreInterlocutor -->
									Chat con <span data-bind="html : $data"></span>
									<!-- /ko -->
									<input type="text" data-bind="value : textoAEnviar" placeholder="Texto de tu mensaje">
									<button data-bind="click : enviar">
										<span>Enviar</span>
									</button>
									<button data-bind="click : solicitarVideo">Solicitar vídeo</button>
									<!-- ko foreach : mensajes -->
									<div>
										<span data-bind="html : hora"></span>:
										<span data-bind="html : texto"></span>
									</div>
									<!-- /ko -->
								</div>
								<!-- /ko -->
							</div>
						</div>
						
						<div class="oj-sm-4">
							<h2>Zona de vídeo</h2>
							<div class="oj-sm-12">
								<video id="widgetVideoLocal" playsinline autoplay controls></video>
								<video id="widgetVideoRemoto" playsinline autoplay controls></video>							
							</div>
						</div>
					</div>
				<!-- /ko -->
			</div>
		</div>
	</div>
</div>